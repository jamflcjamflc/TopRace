# TopRace
TopRace is an updated version of the game Cars4race which several additions. New tracks have been added and several bugs have been corrected. Also all the code has been reformated to be more readable.
I have changed the name because the game is actually a top down view of a car race. The track and all the cars are entirely visible at any time and this means that the track must be simple so it fits the screen with cars of enough size to be handled.
The number of cars that can race is arbitrary and its number, color, behaviour and other parameters are all configurable in a file named par.ini located in the resources folder. This file contain several common parameters for all the cars that control the car behavior, such as the frontal and lateral drag and the offroad drag. It also contain the track_with_ratio parameter, which is half the width of the car with respect to the screen width. Other parameters such as gthe color of the cars, their mass, power and driver initials (three chars) come in lists separated by ';'. The colors come in rgb code with three integers separated by ','. You can change the values of these parameters to make the race easier or more difficult for you.
The number of cars can be changing by adding or removing members to the parameters that come as a list of values for each car. By default there are 7 cars in the race.
The cars are driven with game-pads plugged to your computer. Each game-pad controls one car, starting from the ones at the top of the list. The cars that are not associated with gamepads race in automatic mode.
The initial menu guides you through the available tracks so you can chose one of them to race (only one player, the one in the first car can chose track). Then there is a qualification race, in which the cars race for a specific amount of time to gain the pole position and the other positions at the start of the main race. The car that completes a lap in the minimum time gets the pole position and the other qualify in the order of their best lap time. The time that lasts the qualification can be modified in the par.ini file.
The main race lasts a fixed number of laps (which can be defined in the par.ini file). The race is won by the car that crosses the endline first after completing the number of laps predefined. A lap is succesfully completed by a car if it passes through all the checkpoints in the track without missing any of them. The checkpoints are marked as circles in the track and they illuminate with the color of your car as you pass over them. If you miss one you the next checkpoints stop illuminating so you need to go back to pass through that checkpoint.
The results of each race are stored in a file named log.log which is located in the data folder.
The game is started by running the script toprace.py in the main folder. You need to run the file with python3, otherwise the tracks provided will not work, however you can create your own tracks with python2 and then the game will run with python2 as well.
You need numpy and pygame installed to run this game
There are a number of tracks provided, but you can create your own tracks. In order to do that open a drawing software such as paint and draw your track as a closed loop line. It is recommended that the canvas in which you draw is about the resolution of your screen, although it is not absolutly required. It is recommended that the line is one pixel thick. The track must be drawn in black (0,0,0) rgb color. Then mark the initial point of the track with a red pixel (255,0,0) and delete one pixel so the initial pixel is connected wiht just one other pixel. This will define the orientation of the race. The checkpoint pixels are marked within the track (use one point in each turn) with a pixel of color (255,0,255) and then mark one point in the canvas that is far from any other pixel in the track so the scorebord will be located there. The color of the scoreboard pixel must be (0,255,0).
Once you have your drawing save it as .png format and pace it in the tracks folder. Then run the script create_track.py passing the name of the track you just created (without extension) as argument. For example: python create_track.py -na montmelo
A video with a demo of the game can be found in:
xxxx
